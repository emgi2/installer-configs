{
  "name": "Google Pixel 3a",
  "codename": "sargo",
  "unlock": ["unlock", "downgrade_android", "support"],
  "user_actions": {
    "unlock": {
      "title": "OEM unlock",
      "description": "If you haven't done so already, make sure to OEM unlock your device first.",
      "link": "https://source.android.com/devices/bootloader/locking_unlocking#unlocking-bootloader"
    },
    "recovery": {
      "title": "Reboot to Recovery",
      "description": "With the device powered off, press and hold the volume up and power buttons until the screen turns on. You might have to unplug your device. Plug it back in as soon as it is in recovery mode and click the button below to continue.",
      "image": "phone_power_up",
      "button": true
    },
    "bootloader": {
      "title": "Reboot to Bootloader",
      "description": "With the device powered off, press and hold the volume down and power buttons until the screen turns on. You might have to unplug your device. Plug it back in as soon as it is in bootloader mode and click the button below to continue.",
      "image": "phone_power_down",
      "button": true
    },
    "downgrade_android": {
      "title": "Downgrade Android",
      "description": "If the device is running an Android version above 9.0, you might have to downgrade. Please make sure to flash version pq3b.190801.002 of the factory image before proceeding.",
      "link": "https://developers.google.com/android/images#sargo"
    },
    "support": {
      "title": "Support",
      "description": "For details about Ubuntu Touch support for the Pixel 3a, please head over to the UBports forum thread.",
      "link": "https://forums.ubports.com/topic/4621/google-pixel-3a-sargo"
    }
  },
  "operating_systems": [
    {
      "name": "Ubuntu Touch",
      "sanity_check": "Are you sure?",
      "options": [
        {
          "var": "channel",
          "name": "Channel",
          "tooltip": "The release channel",
          "link": "https://docs.ubports.com/en/latest/about/process/release-schedule.html",
          "type": "select",
          "remote_values": { "type": "systemimagechannels" }
        },
        {
          "var": "wipe",
          "name": "Wipe Userdata",
          "tooltip": "Wipe personal data",
          "type": "checkbox"
        },
        {
          "var": "bootstrap",
          "name": "Bootstrap",
          "tooltip": "Flash system partitions using fastboot",
          "type": "checkbox",
          "value": true
        }
      ],
      "prerequisites": [],
      "steps": [
        {
          "type": "download",
          "condition": {"var": "bootstrap", "value": true},
          "group": "firmware",
          "files": [
            {
              "url": "http://cdimage.ubports.com/devices/sargo/boot-sargo.img",
              "checksum": "534cc2da2add4a2bd8136b01069ed7dbe432076659fd4780910b6910b916f77b"
            },
            {
              "url": "http://cdimage.ubports.com/devices/sargo/vbmeta-sargo.img",
              "checksum": "534cc2da2add4a2bd8136b01069ed7dbe432076659fd4780910b6910b916f77b"
            },
            {
              "url": "http://cdimage.ubports.com/devices/sargo/dtbo-sargo.img",
              "checksum": "534cc2da2add4a2bd8136b01069ed7dbe432076659fd4780910b6910b916f77b"
            }
          ]
        },
        {
          "type": "adb:reboot",
          "condition": {"var": "bootstrap", "value": true},
          "to_state": "bootloader",
          "fallback_user_action": "bootloader"
        },
        {
          "type": "fastboot:flash",
          "condition": {"var": "bootstrap", "value": true},
          "flash": [
            {
              "partition": "boot",
              "file": "boot-sargo.img",
              "group": "firmware"
            },
            {
              "partition": "dtbo",
              "file": "dtbo-sargo.img",
              "group": "firmware"
            },
            {
              "partition": "vbmeta",
              "file": "vbmeta-sargo.img",
              "group": "firmware"
            }
          ]
        },
        {
          "type": "fastboot:format",
          "condition": {"var": "wipe", "value": true},
          "partition": "userdata",
          "partitionType": "ext4"
        },
        {
          "type": "user_action",
          "condition": {"var": "bootstrap", "value": true},
          "action": "recovery"
        },
        {
          "type": "adb:reboot",
          "condition": {"var": "bootstrap", "value": false},
          "to_state": "recovery",
          "fallback_user_action": "recovery"
        },
        {
          "type": "systemimage"
        },
        {
          "type": "adb:reboot",
          "to_state": "recovery",
          "fallback_user_action": "recovery"
        }
      ],
      "slideshow": []
    }
  ]
}
